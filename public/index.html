<!doctype html><html><head>
  <meta charset="utf8">
  <title>Botifarra</title>
  <meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no">
  <link rel="icon" href="img/favicon.png" type="image/x-icon">

  <!--CSS-->
  <link rel=stylesheet href="css.css">
  <link rel=stylesheet href="tapet.css">
  <link rel=stylesheet href="responsive.css">

  <!--client socket-->
  <script src="libs/socket.io/2.0.4/socket.io.js"></script>
</head><body onload="init()">

<!--titol + entrar al xat container-->
<div style=padding-left:8px>

<!--titol-->
<h3 id=titol>
  Botifarra online <code>v0.1 (beta)</code>
</h3>

<!--entrar al xat container-->
<div class=flex>
  <input id=nom_usuari placeholder="Escriu nom usuari" maxlength=20 value='nai'>
  <button id=btn_entrar>entrar</button>
  <script>
    (function(){
      /*NOM USUARI*/
      var nom_usuari=document.getElementById('nom_usuari');

      //processa paràmetre GET=nick (si n'hi ha)
      var GET1=window.location.search.substr(1).split('=')[1];
      if(GET1){
        nom_usuari.value=GET1;
        return;
      }

      //si no GET: processa cookie
      //comprova si usuari ja havia entrat abans per guardar el nom
      //get cookie (stackoverflow)
      function getCookie(cname){
        var name=cname+"=";
        var ca=document.cookie.split(';');
        for(var i=0;i<ca.length;i++){
          var c=ca[i];
          while(c.charAt(0)==' '){c=c.substring(1);}
          if(c.indexOf(name)==0){
            return c.substring(name.length,c.length);
          }
        }
        return false;
      }

      var cookie_nom_usuari=getCookie('nom_usuari');
      if(cookie_nom_usuari){
        nom_usuari.value=cookie_nom_usuari;
        return;
      }

      //si no GET ni cookie escriu num random 1 a 1000
      nom_usuari.value="nai_"+(Math.floor(Math.random()*1000)+1);
    })();
  </script>
</div>

</div><hr>

<!--indicador loading-->
<div id=ico_loading style="text-align:center">
  <img src="/img/loading.gif" style="display:block;margin:auto;">
  Carregant app...
</div>

<!--main container-->
<div id=main style=display:none>

<!--usuaris + xat + partides-->
<div id=top_container class=flex style="justify-content:center">
  <!--xat-->
  <div id=xat_container style="padding-left:1px;">
    <p style="font-size:small">Xat general <em id=feedback></em></p>
    <div id=xat></div>
    <div id=xat_controls class=flex>
      <input id=missatge placeholder="Escriu un missatge" maxlength=140 value="">
      <button id=btn_missatge>enviar</button>
    </div>
  </div>

  <!--partides + usuaris-->
  <div id=partides_usuaris_container class=flex>
    <!--partides-->
    <div id=partides_container style="padding-left:1px;">
      <p style="font-size:small;">
        Partides (<span id=comptador_partides>0</span>)
      </p>
      <div id=partides></div>
      <button id=btn_crear_partida>crear</button>
    </div>

    <!--usuaris-->
    <div id=usuaris_container style="padding-left:1px;">
      <p style="font-size:small">Usuaris online (<span id=comptador_usuaris>0</span>)</p>
      <ul id=usuaris></ul>
    </div>
  </div>
</div>

<!--separador--><div style="margin-top:8px"></div>

<!--partida actual-->
<div id=partida_container class=flex style="justify-content:center">
  <!--tapet + info partida container-->
  <div id=tapet_container>
    <!--tapet-->
    <div id=tapet>
      <!--lloc cartes-->
      <div>
        <div id=jugadorN class=jugador></div>
        <div id=jugadorS class=jugador></div>
        <div id=jugadorE class=jugador></div>
        <div id=jugadorO class=jugador></div>
      </div>

      <!--status + triomf-->
      <div id=status_partida onclick="window.location='#tapet';return false;">Esperant nova partida</div>
      <div id=triomf style="visibility:hidden"></div>

      <!--boto veure ultima basa-->
      <div id=veure_ultima_basa onclick="veure_ultima_basa()" style="visibility:hidden">
        <img src="/img/ico_ultima_basa.jpg">
      </div>

      <!--ma-->
      <div id=ma></div>
    </div>

    <!--info partida-->
    <ul id=info_partida>
      <li>Obligada/101
      <li id=tipus_partida>Partida NO contrada
      <li>Equip 1: <span id=punts_e1>0</span> punts
      <li>Equip 2: <span id=punts_e2>0</span> punts
    </ul>
  </div>

  <!--log-->
  <div id=log></div>
</div>

<!--preload images-->
<script>
(function(){
  [
    '/img/cartes/or01.jpg',
    '/img/cartes/or02.jpg',
    '/img/cartes/or03.jpg',
    '/img/cartes/or04.jpg',
    '/img/cartes/or05.jpg',
    '/img/cartes/or06.jpg',
    '/img/cartes/or07.jpg',
    '/img/cartes/or08.jpg',
    '/img/cartes/or09.jpg',
    '/img/cartes/or10.jpg',
    '/img/cartes/or11.jpg',
    '/img/cartes/or12.jpg',

    '/img/cartes/co01.jpg',
    '/img/cartes/co02.jpg',
    '/img/cartes/co03.jpg',
    '/img/cartes/co04.jpg',
    '/img/cartes/co05.jpg',
    '/img/cartes/co06.jpg',
    '/img/cartes/co07.jpg',
    '/img/cartes/co08.jpg',
    '/img/cartes/co09.jpg',
    '/img/cartes/co10.jpg',
    '/img/cartes/co11.jpg',
    '/img/cartes/co12.jpg',

    '/img/cartes/es01.jpg',
    '/img/cartes/es02.jpg',
    '/img/cartes/es03.jpg',
    '/img/cartes/es04.jpg',
    '/img/cartes/es05.jpg',
    '/img/cartes/es06.jpg',
    '/img/cartes/es07.jpg',
    '/img/cartes/es08.jpg',
    '/img/cartes/es09.jpg',
    '/img/cartes/es10.jpg',
    '/img/cartes/es11.jpg',
    '/img/cartes/es12.jpg',

    '/img/cartes/ba01.jpg',
    '/img/cartes/ba02.jpg',
    '/img/cartes/ba03.jpg',
    '/img/cartes/ba04.jpg',
    '/img/cartes/ba05.jpg',
    '/img/cartes/ba06.jpg',
    '/img/cartes/ba07.jpg',
    '/img/cartes/ba08.jpg',
    '/img/cartes/ba09.jpg',
    '/img/cartes/ba10.jpg',
    '/img/cartes/ba11.jpg',
    '/img/cartes/ba12.jpg',

    '/img/botifarra.jpg',
    '/img/delegar.jpg',
    '/img/ico_ba.jpg',
    '/img/ico_bo.jpg',
    '/img/ico_co.jpg',
    '/img/ico_de.jpg',
    '/img/ico_es.jpg',
    '/img/ico_or.jpg'
  ].forEach(url=>{
    (new Image()).src=url;
  });
})();
</script>

<!--fi pàgina-->
<footer>
  <a target=_blank href="https://github.com/holalluis/butifarra/">Botifarra online</a> |
  Creat per Lluís Mª Bosch (2018) |
  <a target=_blank href="https://raw.githubusercontent.com/holalluis/butifarra/master/readme.md">README</a> |
  <a target=_blank href="pendent.html">Tasques pendents</a>
</footer>

<!--client app-->
<script src="client.js"></script>
